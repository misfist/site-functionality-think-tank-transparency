{"version":3,"file":"data-tables/view.js","mappings":"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","sources":["webpack://data-tables/external import \"@wordpress/interactivity-router\"","webpack://data-tables/external module \"@wordpress/interactivity\"","webpack://data-tables/webpack/bootstrap","webpack://data-tables/webpack/runtime/make namespace object","webpack://data-tables/./src/data-tables/view.js"],"sourcesContent":["module.exports = import(\"@wordpress/interactivity-router\");;","module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport { store, getContext, getElement } from '@wordpress/interactivity';\n\n\nconst { state, callbacks, actions } = store( 'data-tables', {\n\tstate: {\n\t\tget isYearChecked() {\n\t\t\tconst context = getContext();\n\t\t\treturn context.donationYear === state.donationYear;\n\t\t},\n\t\tget isTypeChecked() {\n\t\t\tconst context = getContext();\n\t\t\tconsole.log();\n\t\t\treturn context.donorType === state.donorType;\n\t\t},\n\t\tget isChecked() {\n\t\t\treturn getContext().year === state.donationYear;\n\t\t},\n\t\tget translatedType() {\n\t\t\tconst context = getContext();\n\t\t\treturn state.translated[ context.item ];\n\t\t  }\n\t},\n\tactions: {\n\t\t*getData() {\n\t\t\tconst context = getContext()\n\t\t\tconst url = new URL( `https://${window.location.hostname}/wp-json/site-functionality/v1/transactions/` );\n\t\t\tconst params = new URLSearchParams( state.query ).toString();\n\t\t\tconst data = yield fetch(\n\t\t\t\t`${url}?${params}`\n\t\t\t).then( function( response ){\n\t\t\t\treturn response.json()\n\t\t\t} );\n\n\t\t\tcontext.dataTable = JSON.stringify( data );\n\n\t\t\tconsole.log( `${url}?${params}`, context.dataTable );\n\n\t\t},\n\t\t*updateSearch() {\n\t\t\tconst { ref } = getElement();\n\t\t\tconst { value } = ref;\n\n\t\t\t// Don't navigate if the search didn't really change.\n\t\t\tif ( value === state.searchValue ) return;\n\n\t\t\tstate.searchValue = value;\n\n\t\t\tif ( value === '' ) {\n\t\t\t\t// If the search is empty, navigate to the home page.\n\t\t\t\tconst { actions } = yield import(\n\t\t\t\t\t'@wordpress/interactivity-router'\n\t\t\t\t);\n\t\t\t\tyield actions.navigate( '/' );\n\t\t\t} else {\n\t\t\t\t// If not, navigate to the new URL.\n\t\t\t\tyield updateURL( value );\n\t\t\t}\n\t\t},\n\t\tisChecked: () => {\n\t\t\tconst element = getElement();\n\t\t\tconsole.log( element.attributes.value === state[element.attributes['data-key']] );\n\t\t\treturn element.attributes.value === state[element.attributes['data-key']];\n\t\t},\n\t\tsetValue: ( event ) => {\n\t\t\tevent.preventDefault();\n\t\t\tconst context = getContext();\n\t\t\tconst key = event.target.getAttribute( 'data-key' );\n\t\t\tconst value = event.target.getAttribute( 'value' );\n\t\t\tcontext[key] = value;\n\t\t\tstate[key] = value;\n\n\t\t\tactions.isChecked();\n\t\t\tactions.setQuery();\n\t\t},\n\t\tsetQuery: () => {\n\t\t\tlet query = {};\n\n\t\t\tif( state.donationYear ) {\n\t\t\t\tquery['years'] = ( 'all' == state.donationYear ) ? '' : state.donationYear;\n\t\t\t} \n\t\t\tif( state.donorType ) {\n\t\t\t\tquery['donor-types'] = ( 'all' == state.donorType ) ? '' : state.donorType;\n\t\t\t}\n\t\t\tif( state.thinkTank ) {\n\t\t\t\tquery['think-tanks'] = state.thinkTank;\n\t\t\t}\n\t\t\tif( state.donor ) {\n\t\t\t\tquery['donors'] = state.donor;\n\t\t\t} \n\n\t\t\tstate.query = query;\n\t\t},\n\t\tgetTerm: async ( taxonomy, slug ) => {\n\t\t\tconst url = new URL( `https://${window.location.hostname}/wp-json/wp/v2/${taxonomy}/?slug=${slug}` );\n\t\t\tconst response = await fetch( url );\n\t\t\tconst data = await response.json();\n\t\t\treturn data;\n\t\t},\n\t\tgetTermId: async ( taxonomy, slug ) => {\n\t\t\tconst data = await actions.getTerm( taxonomy, slug );\n\t\t\treturn data[0]?.id;\n\t\t},\n\t\thandleYear: () => {\n\t\t\tconst context = getContext();\n\t\t\tstate.donationYear = context.year;\n\t\t\tactions.setQuery();\n\t\t\tactions.getData();\n\t\t},\n\t\thandleType: ( event ) => {\n\t\t\tconst context = getContext();\n\t\t\tconst value = event.target.getAttribute( 'value' );\n\t\t\t// context.donorType = value;\n\t\t\tstate.donorType = value;\n\t\t\tactions.setQuery();\n\t\t\tactions.getData();\n\t\t},\n\t},\n\tcallbacks: {\n\t\tlog: () => {\n\t\t\tconst context = getContext();\n\t\t\t// console.log( 'log.context', JSON.stringify( context ) );\n\t\t\t// console.log( 'log.state', JSON.stringify( state.query ) );\n\t\t}\n\t},\n} );\n\n"],"names":["store","getContext","getElement","state","callbacks","actions","isYearChecked","context","donationYear","isTypeChecked","console","log","donorType","isChecked","year","translatedType","translated","item","getData","url","URL","window","location","hostname","params","URLSearchParams","query","toString","data","fetch","then","response","json","dataTable","JSON","stringify","updateSearch","ref","value","searchValue","navigate","updateURL","element","attributes","setValue","event","preventDefault","key","target","getAttribute","setQuery","thinkTank","donor","getTerm","taxonomy","slug","getTermId","id","handleYear","handleType"],"sourceRoot":""}